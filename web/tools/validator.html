<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLM Profiles Interactive Validator</title>
    <link rel="canonical" href="https://llmprofiles.org/tools/validator.html">
    <meta name="description" content="Interactive validator for LLM Profiles - Validate your structured data against opinionated profiles for AI & SEO">
    
    <!-- Modern CSS Framework -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- JSON Editor -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsoneditor/9.10.2/jsoneditor.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/jsoneditor/9.10.2/jsoneditor.min.css" rel="stylesheet">
    
    <!-- Define fallback functions first -->
    <script>
        // Modern fallback loading without document.write
        function loadAJVFallback() {
            console.log('Loading AJV fallback...');
            const script = document.createElement('script');
            script.src = 'https://cdn.jsdelivr.net/npm/ajv@8/dist/bundle/ajv.min.js';
            script.onload = () => console.log('AJV loaded from jsdelivr fallback');
            script.onerror = () => console.warn('AJV fallback also failed - validation will be limited');
            document.head.appendChild(script);
        }
        
        function loadAJVFormatsFallback() {
            console.log('Loading AJV Formats fallback...');
            const script = document.createElement('script');
            script.src = 'https://cdn.jsdelivr.net/npm/ajv-formats@2/dist/ajv-formats.min.js';
            script.onload = () => console.log('AJV Formats loaded from jsdelivr fallback');
            script.onerror = () => console.warn('AJV Formats fallback also failed');
            document.head.appendChild(script);
        }
        
        // Try to load AJV directly for localhost development
        function loadAJVForLocalhost() {
            console.log('Attempting to load AJV for localhost...');
            
            // Create a simple AJV-like validator for development
            if (!window.ajv) {
                window.ajv = {
                    default: function(options) {
                        return {
                            compile: function(schema) {
                                return function(data) {
                                    // Simple validation logic
                                    if (schema.required) {
                                        for (const field of schema.required) {
                                            if (!data[field]) {
                                                this.errors = [{ 
                                                    message: `${field} is required`,
                                                    instancePath: `/${field}`
                                                }];
                                                return false;
                                            }
                                        }
                                    }
                                    this.errors = [];
                                    return true;
                                };
                            }
                        };
                    }
                };
                console.log('Created fallback AJV for localhost development');
            }
        }
    </script>
    
    <!-- Standalone AJV fallback for localhost -->
    <script src="ajv-standalone.js"></script>
    
    <!-- AJV for validation (will override standalone if successful) -->
    <script src="https://unpkg.com/ajv@8/dist/bundle/ajv.min.js" 
            onerror="console.warn('AJV CDN failed, using standalone version')" 
            onload="console.log('✅ AJV loaded from unpkg CDN')"></script>
    <script src="https://unpkg.com/ajv-formats@2/dist/ajv-formats.min.js" 
            onerror="console.warn('AJV Formats CDN failed')"
            onload="console.log('✅ AJV Formats loaded from unpkg CDN')"></script>
    
    <style>
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .card-shadow { box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .json-editor { min-height: 400px; }
        .error-highlight { border-left: 4px solid #ef4444; background-color: #fef2f2; }
        .success-highlight { border-left: 4px solid #10b981; background-color: #f0fdf4; }
        .warning-highlight { border-left: 4px solid #f59e0b; background-color: #fffbeb; }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .spinner { border: 2px solid #f3f3f3; border-top: 2px solid #3498db; border-radius: 50%; width: 20px; height: 20px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .code-block { background: #1e293b; color: #e2e8f0; border-radius: 8px; padding: 1rem; font-family: 'Courier New', monospace; }
        .profile-card { transition: all 0.3s ease; cursor: pointer; }
        .profile-card:hover { transform: translateY(-2px); box-shadow: 0 15px 30px rgba(0,0,0,0.15); }
        .profile-card.selected { border: 2px solid #667eea; background: #f8fafc; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    
    <!-- Header -->
    <header class="gradient-bg text-white py-8">
        <div class="container mx-auto px-4">
            <div class="text-center">
                <h1 class="text-4xl font-bold mb-2">
                    <i class="fas fa-check-circle mr-3"></i>
                    LLM Profiles Interactive Validator
                </h1>
                <p class="text-xl opacity-90">Validate your structured data against opinionated profiles for AI & SEO</p>
                <div class="mt-4 flex justify-center space-x-4">
                    <span class="bg-white bg-opacity-20 px-3 py-1 rounded-full text-sm">
                        <i class="fas fa-robot mr-1"></i> AEO-Ready
                    </span>
                    <span class="bg-white bg-opacity-20 px-3 py-1 rounded-full text-sm">
                        <i class="fas fa-cogs mr-1"></i> Real-time Validation
                    </span>
                    <span class="bg-white bg-opacity-20 px-3 py-1 rounded-full text-sm">
                        <i class="fas fa-download mr-1"></i> Export Training Data
                    </span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        
        <!-- Quick Start Steps -->
        <div class="mb-8 bg-white rounded-lg card-shadow p-6">
            <h2 class="text-2xl font-bold mb-4 flex items-center">
                <i class="fas fa-rocket mr-2 text-blue-600"></i>
                Quick Start
            </h2>
            <div class="grid md:grid-cols-3 gap-4">
                <div class="text-center p-4 bg-blue-50 rounded-lg">
                    <div class="text-3xl text-blue-600 mb-2">1</div>
                    <h3 class="font-semibold mb-2">Choose Profile</h3>
                    <p class="text-sm text-gray-600">Select the profile that matches your content type</p>
                </div>
                <div class="text-center p-4 bg-green-50 rounded-lg">
                    <div class="text-3xl text-green-600 mb-2">2</div>
                    <h3 class="font-semibold mb-2">Input JSON-LD</h3>
                    <p class="text-sm text-gray-600">Paste your JSON-LD markup or start with an example</p>
                </div>
                <div class="text-center p-4 bg-purple-50 rounded-lg">
                    <div class="text-3xl text-purple-600 mb-2">3</div>
                    <h3 class="font-semibold mb-2">Validate & Export</h3>
                    <p class="text-sm text-gray-600">Get validation results and export training data</p>
                </div>
            </div>
        </div>

        <!-- Profile Selection -->
        <div class="mb-8 bg-white rounded-lg card-shadow p-6">
            <h2 class="text-2xl font-bold mb-4 flex items-center">
                <i class="fas fa-list mr-2 text-blue-600"></i>
                Step 1: Select Profile
            </h2>
            <div id="profileSelection" class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                <!-- All 15 profiles will be loaded here dynamically -->
                <div class="text-center py-8 text-gray-500">
                    <i class="fas fa-spinner fa-spin text-2xl mb-2"></i>
                    <p>Loading profiles...</p>
                </div>
            </div>
        </div>

        <!-- Schema Information -->
        <div id="schemaInfo" class="mb-8 bg-white rounded-lg card-shadow p-6 hidden">
            <h2 class="text-2xl font-bold mb-4 flex items-center">
                <i class="fas fa-info-circle mr-2 text-blue-600"></i>
                Profile Information
            </h2>
            <div id="schemaDetails" class="grid md:grid-cols-2 gap-6">
                <!-- Schema details will be loaded here -->
            </div>
        </div>

        <!-- Input and Validation -->
        <div class="grid lg:grid-cols-2 gap-8">
            
            <!-- Input Section -->
            <div class="bg-white rounded-lg card-shadow p-6">
                <h2 class="text-2xl font-bold mb-4 flex items-center">
                    <i class="fas fa-edit mr-2 text-green-600"></i>
                    Step 2: Input JSON-LD
                </h2>
                
                <div class="mb-4 flex flex-wrap gap-2">
                    <button id="loadExampleBtn" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors">
                        <i class="fas fa-download mr-1"></i> Load Example
                    </button>
                    <button id="clearInputBtn" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors">
                        <i class="fas fa-trash mr-1"></i> Clear
                    </button>
                    <button id="validateBtn" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition-colors">
                        <i class="fas fa-check mr-1"></i> Validate
                    </button>
                </div>
                
                <div id="jsonInput" class="json-editor border rounded-lg"></div>
            </div>

            <!-- Results Section -->
            <div class="bg-white rounded-lg card-shadow p-6">
                <h2 class="text-2xl font-bold mb-4 flex items-center">
                    <i class="fas fa-clipboard-check mr-2 text-purple-600"></i>
                    Step 3: Validation Results
                </h2>
                
                <div id="validationResults" class="space-y-4">
                    <div class="text-center text-gray-500 py-8">
                        <i class="fas fa-hourglass-start text-4xl mb-4"></i>
                        <p>Select a profile and input JSON-LD to see validation results</p>
                    </div>
                </div>
                
                <!-- Export Options -->
                <div id="exportOptions" class="mt-6 hidden">
                    <h3 class="text-lg font-semibold mb-3">Export Options</h3>
                    <div class="flex flex-wrap gap-2">
                        <button id="exportTrainingBtn" class="bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 rounded-lg transition-colors">
                            <i class="fas fa-download mr-1"></i> Training Data (JSONL)
                        </button>
                        <button id="exportOutputBtn" class="bg-cyan-500 hover:bg-cyan-600 text-white px-4 py-2 rounded-lg transition-colors">
                            <i class="fas fa-file-export mr-1"></i> Normalized Output (JSON)
                        </button>
                        <button id="copyCICommandBtn" class="bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg transition-colors">
                            <i class="fas fa-copy mr-1"></i> Copy CI Command
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Additional Resources -->
        <div class="mt-8 bg-white rounded-lg card-shadow p-6">
            <h2 class="text-2xl font-bold mb-4 flex items-center">
                <i class="fas fa-book mr-2 text-red-600"></i>
                Resources & Documentation
            </h2>
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-4">
                <a href="https://llmprofiles.org/docs/" target="_blank" class="block p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors">
                    <i class="fas fa-book-open text-blue-600 text-2xl mb-2"></i>
                    <h3 class="font-semibold">Documentation</h3>
                    <p class="text-sm text-gray-600">Complete guides and specifications</p>
                </a>
                <a href="https://llmprofiles.org/examples/" target="_blank" class="block p-4 bg-green-50 rounded-lg hover:bg-green-100 transition-colors">
                    <i class="fas fa-code text-green-600 text-2xl mb-2"></i>
                    <h3 class="font-semibold">Examples</h3>
                    <p class="text-sm text-gray-600">Real-world implementation examples</p>
                </a>
                <a href="https://github.com/HaMi-IQ/llmprofiles" target="_blank" class="block p-4 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors">
                    <i class="fab fa-github text-purple-600 text-2xl mb-2"></i>
                    <h3 class="font-semibold">GitHub</h3>
                    <p class="text-sm text-gray-600">Source code and contributions</p>
                </a>
                <a href="https://llmprofiles.org/api/discovery.json" target="_blank" class="block p-4 bg-orange-50 rounded-lg hover:bg-orange-100 transition-colors">
                    <i class="fas fa-plug text-orange-600 text-2xl mb-2"></i>
                    <h3 class="font-semibold">API</h3>
                    <p class="text-sm text-gray-600">Profile discovery and integration</p>
                </a>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-12">
        <div class="container mx-auto px-4 text-center">
            <p class="mb-2">&copy; 2024 HAMI-IQ. All rights reserved.</p>
            <p class="text-gray-400">LLM Profiles - Bridging SEO and AI with structured data</p>
            <div class="mt-4 flex justify-center space-x-4">
                <a href="https://llmprofiles.org/" class="text-blue-400 hover:text-blue-300">Website</a>
                <a href="https://github.com/HaMi-IQ/llmprofiles" class="text-blue-400 hover:text-blue-300">GitHub</a>
                <a href="https://llmprofiles.org/docs/" class="text-blue-400 hover:text-blue-300">Docs</a>
            </div>
        </div>
    </footer>

    <!-- Loading Modal -->
    <div id="loadingModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white rounded-lg p-6 text-center">
            <div class="spinner mx-auto mb-4"></div>
            <p>Loading schema and examples...</p>
        </div>
    </div>

    <script src="validator.js?v=2025010202"></script>
</body>
</html>
